{% extends "base.html" %}

{% block title %}Outfit Suggestions{% endblock %}

{% block content %}
<h1>Outfit Suggestions</h1>

<!-- Add the category selection form -->
<form method="get" action="{{ url_for('suggestions') }}" class="category-form">
    <label>Select categories to include:</label><br><br>
    {% for category in ['Top', 'Bottom', 'Footwear', 'Outerwear', 'Accessory'] %}
        <label>
            <input type="checkbox" name="categories" value="{{ category }}"
            {% if category in selected_categories %} checked {% endif %}>
            {{ category }}
        </label>
        &nbsp;&nbsp;
    {% endfor %}
    <br><br>
    <button type="submit">Generate Suggestions</button>
</form>

{% if suggestions %}
    <div class="outfit-container">
        {% for suggestion in suggestions %}
            <div class="outfit">
                <h2>Score: {{ suggestion.score|round(2) }}</h2>
                {% for category in selected_categories %}
                    {% set item = suggestion.get(category.lower()) %}
                    {% if item %}
                    <div class="item">
                        <p class="item-title">{{ category }}</p>
                        <img src="{{ url_for('static', filename='uploads/' + item.image_filename) }}" alt="{{ category }}">
                        <p>Category: {{ item.category }}</p>
                    </div>
                    {% endif %}
                {% endfor %}
            </div>
        {% endfor %}
    </div>
{% else %}
    <p>No outfit suggestions available. Please add more items to your wardrobe or adjust your category selections.</p>
{% endif %}
<a href="{{ url_for('home') }}">Upload More Items</a><br>
<a href="{{ url_for('wardrobe') }}">View My Wardrobe</a>
{% endblock %}

{% block head %}
{{ super() }}
<style>
    .outfit-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
    }
    .outfit {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px;
        width: 300px;
        box-sizing: border-box;
    }
    .item {
        text-align: center;
        margin-bottom: 10px;
    }
    .item img {
        width: 100px;
        height: auto;
    }
    .item-title {
        font-weight: bold;
    }
    /* Add styles for the form */
    .category-form {
        margin-bottom: 20px;
        text-align: center;
    }
    .category-form input[type="checkbox"] {
        margin-right: 5px;
    }
</style>
{% endblock %}
